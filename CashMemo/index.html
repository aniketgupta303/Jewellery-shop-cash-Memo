<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CashMemo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background-color: rgb(253, 246, 150);
      }

      .infoContainer {
        height: 18vh;
        width: 90%;
        margin: 10px auto;
        display: flex;
        justify-content: space-around;
      }

      .devInfo {
        display: flex;
        flex-direction: column;
        font-family: "Source Code Pro", monospace;
      }

      .name {
        font-size: 3vw;
        font-weight: bold;
        font-family: "Playfair Display", serif;
      }

      .about {
        font-size: 1.5vw;
      }

      .devpic img,
      .devipic img {
        height: 18vh;
        width: 15vh;
        margin-left: auto;
      }

      #remark {
        margin-top: 2vw;
      }

      .card-body {
        margin-left: 0;
      }

      .btn {
        margin-top: 1vw;
      }

      .maa {
        height: 1vw;
        width: 15vh;
        margin-left: auto;
      }

      @media print {
        body {
          background-color: #c0c25b;
        }

        .btn {
          display: none;
        }

        .devInfo {
          margin-left: 0;
        }

        .row {
          page-break-inside: avoid;
        }

        .mb-1,
        .mb-3 {
          margin-bottom: 0px;
        }

        #remark {
          margin-top: 20px;
          margin-inline-start: 20px;
        }
      }
    </style>
  </head>
  <body style="background-color: rgb(253, 246, 150)">
    <h1
      style="
        text-align: center;
        margin-bottom: 0;
        margin-top: 20px;
        font-size: 50px;
        font-weight: bolder;
      "
    >
      <img
        src="logo1.png"
        alt=""
        style="width: 180px; height: 160px"
      />&nbsp;New Shivraj Jewellers
    </h1>
    <h6 style="text-align: center; margin-top: -40px">
      Dindyalpur, Siwan Pin:841506, Bihar <br />Mobile: 6205920990,7301766081
      <br />
      <span style="color: red">GST: 10HIGPK1431J1ZM</span>
    </h6>

    <div class="container" style="margin-top: 50px">
      <div class="card-body">
        <div class="row">
          <div class="col-8">
            <div class="input-group mb-3" style="margin-top: 10px">
              <span class="input-group-text" id="basic-addon1"
                >Customer Name</span
              >
              <input
                type="text"
                class="form-control"
                placeholder="Enter Customer Name"
                aria-label="Username"
                aria-describedby="basic-addon1"
              />
            </div>

            <div class="input-group mb-3">
              <span class="input-group-text" id="basic-addon1">Address</span>
              <input
                type="text"
                class="form-control"
                placeholder="address"
                aria-label="Username"
                aria-describedby="basic-addon1"
              />
            </div>

            <div class="input-group mb-3">
              <span class="input-group-text" id="basic-addon1">Mob. No.</span>
              <input
                type="text"
                class="form-control"
                placeholder="Mob.no."
                aria-label="Username"
                aria-describedby="basic-addon1"
              />
            </div>

            <div class="input-group mb-3">
              <span class="input-group-text" id="basic-addon1">City</span>
              <input
                type="text"
                class="form-control"
                placeholder="city"
                aria-label="Username"
                aria-describedby="basic-addon1"
              />
            </div>
          </div>
          <div class="col-4">
            <div style="margin-top: 10px; margin-bottom: 10px">
              <span class="input-group-text" id="basic-addon1"
                >Invoice No.</span
              >
              <input
                type="number"
                class="form-control"
                placeholder="Invoice No."
                aria-label="Username"
                aria-describedby="basic-addon1"
              />
            </div>

            <div style="margin-bottom: 5px">
              <span class="input-group-text" id="basic-addon1">Date</span>
              <input
                type="date"
                class="form-control"
                aria-label="Username"
                aria-describedby="basic-addon1"
              />
            </div>

            <div class="input-group mb-3">
              <span class="input-group-text" id="basic-addon1">Pin:</span>
              <input
                type="text"
                class="form-control"
                placeholder="Pin Code"
                aria-label="Username"
                aria-describedby="basic-addon1"
              />
            </div>
          </div>

          <table id="myTable" class=" ">
            <thead class="head">
              <tr>
                <th
                  scope="col"
                  style="width: 5%; background-color: rgb(249, 40, 40)"
                >
                  No.
                </th>
                <th
                  scope="col"
                  style="
                    width: 40%;
                    padding-left: 20px;
                    background-color: rgb(249, 40, 40);
                  "
                >
                  Item Discription
                </th>
                <th
                  scope="col"
                  style="
                    width: 10%;
                    padding-left: 20px;
                    background-color: rgb(249, 40, 40);
                  "
                >
                  PCS
                </th>
                <th
                  scope="col"
                  style="
                    width: 10%;
                    padding-left: 20px;
                    background-color: rgb(249, 40, 40);
                  "
                >
                  Weight
                </th>
                <th
                  scope="col"
                  style="
                    width: 15%;
                    padding-left: 20px;
                    background-color: rgb(249, 40, 40);
                  "
                >
                  Amount
                </th>
                <th
                  scope="col"
                  style="
                    width: 15%;
                    padding-left: 20px;
                    background-color: rgb(249, 40, 40);
                  "
                >
                  Lbr Cost
                </th>
                <th
                  scope="col"
                  style="
                    width: 15%;
                    padding-left: 20px;
                    background-color: rgb(249, 40, 40);
                  "
                >
                  Total Amount
                </th>
                <th scope="col" style="background-color: rgb(249, 40, 40)"></th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1</td>
                <td><input type="text" class="form-control" /></td>
                <td>
                  <input
                    type="number"
                    class="form-control"
                    name="qty"
                    onchange="calculateRow(this);"
                  />
                </td>
                <td><input type="text" class="form-control" name="wgt" /></td>
                <td>
                  <input
                    type="number"
                    class="form-control"
                    name="Amount"
                    onchange="calculateRow(this);"
                  />
                </td>
                <td>
                  <input
                    type="number"
                    class="form-control"
                    name="lbr"
                    onchange="calculateRow(this);"
                  />
                </td>
                <td><input type="number" class="form-control" name="tot" /></td>
                <td>
                  <button
                    type="button"
                    class="btn btn-danger"
                    onclick="deleteRow(this.parentNode.parentNode.rowIndex)"
                  >
                    X
                  </button>
                </td>
              </tr>
            </tbody>
          </table>

          <div class="col">
            <button type="button" class="btn btn-success" onclick="addRow()">
              Add Item
            </button>
          </div>
        </div>

        <div class="row" style="margin-top: 20px">
          <div class="col-8">
            <h4 id="remark">Remarks:</h4>
            <textarea
              class="form-control"
              name="remark"
              id=""
              cols="10"
              rows="5"
            ></textarea>
          </div>
          <div class="col-4">
            <div class="input-group mb-1">
              <span class="input-group-text" id="basic-addon1">Sub Total</span>
              <input
                type="number"
                class="form-control"
                id="subTotal"
                placeholder=""
                aria-label="Username"
                aria-describedby="basic-addon1"
              />
            </div>
            <div class="input-group mb-1">
              <span class="input-group-text" id="basic-addon1">GST</span>
              <input
                type="number"
                class="form-control"
                id="gst"
                placeholder=""
                aria-label="Username"
                aria-describedby="basic-addon1"
              />
            </div>
            <div class="input-group mb-1">
              <span class="input-group-text" id="basic-addon1">Net Total</span>
              <input
                type="number"
                class="form-control"
                id="netTotal"
                placeholder=""
                aria-label="Username"
                aria-describedby="basic-addon1"
              />
            </div>
            <div class="input-group mb-1">
              <span class="input-group-text" id="basic-addon1">Received</span>
              <input
                type="number"
                class="form-control"
                id="received"
                placeholder=""
                aria-label="Username"
                aria-describedby="basic-addon1"
              />
            </div>
            <div class="input-group mb-1">
              <span class="input-group-text" id="basic-addon1">Balance</span>
              <input
                type="number"
                class="form-control"
                id="balance"
                placeholder=""
                aria-label="Username"
                aria-describedby="basic-addon1"
              />
            </div>
          </div>
        </div>
      </div>
      <div class="text-center">
        <button
          type="button"
          class="btn btn-warning"
          style="margin-top: 10px"
          onclick="window.print()"
        >
          Print Receipt
        </button>
        <button
          type="button"
          class="btn btn-info"
          style="margin-top: 10px"
          onclick="shareReceipt()"
        >
          Share on WhatsApp
        </button>
      </div>
    </div>
    <script>
      // Add new row
      function addRow() {
        var table = document
          .getElementById("myTable")
          .getElementsByTagName("tbody")[0];
        var newRow = table.insertRow();
        var cell1 = newRow.insertCell(0);
        var cell2 = newRow.insertCell(1);
        var cell3 = newRow.insertCell(2);
        var cell4 = newRow.insertCell(3);
        var cell5 = newRow.insertCell(4);
        var cell6 = newRow.insertCell(5);
        var cell7 = newRow.insertCell(6);
        var cell8 = newRow.insertCell(7);

        var rowCount = table.rows.length;
        cell1.innerHTML = rowCount;

        cell2.innerHTML = '<input type="text" class="form-control" />';
        cell3.innerHTML =
          '<input type="number" class="form-control" name="qty" onchange="calculateRow(this);" />';
        cell4.innerHTML =
          '<input type="text" class="form-control" name="wgt" />';
        cell5.innerHTML =
          '<input type="number" class="form-control" name="Amount" onchange="calculateRow(this);" />';
        cell6.innerHTML =
          '<input type="number" class="form-control" name="lbr" onchange="calculateRow(this);" />';
        cell7.innerHTML =
          '<input type="number" class="form-control" name="tot" />';
        cell8.innerHTML =
          '<button type="button" class="btn btn-danger" onclick="deleteRow(this.parentNode.parentNode.rowIndex)">X</button>';
      }

      // Delete row
      function deleteRow(row) {
        document.getElementById("myTable").deleteRow(row);
      }

      // Calculate row total
      function calculateRow(input) {
        var row = input.parentNode.parentNode;
        var qty = parseFloat(row.querySelector('input[name="qty"]').value) || 0;
        var amount =
          parseFloat(row.querySelector('input[name="Amount"]').value) || 0;
        var lbr = parseFloat(row.querySelector('input[name="lbr"]').value) || 0;

        var total = qty * amount + lbr;
        row.querySelector('input[name="tot"]').value = total;

        calculateTotals();
      }

      // Calculate totals
      function calculateTotals() {
        var subTotal = 0;
        var table = document
          .getElementById("myTable")
          .getElementsByTagName("tbody")[0];
        for (var i = 0; i < table.rows.length; i++) {
          var row = table.rows[i];
          subTotal +=
            parseFloat(row.querySelector('input[name="tot"]').value) || 0;
        }

        var gst = subTotal * 0.05; // assuming GST is 5%
        var netTotal = subTotal + gst;

        document.getElementById("subTotal").value = subTotal.toFixed(2);
        document.getElementById("gst").value = gst.toFixed(2);
        document.getElementById("netTotal").value = netTotal.toFixed(2);
        document.getElementById("balance").value = (
          netTotal -
          (parseFloat(document.getElementById("received").value) || 0)
        ).toFixed(2);
      }

      // Share on WhatsApp
      function shareReceipt() {
        var customerName = document.querySelector(
          'input[placeholder="Enter Customer Name"]'
        ).value;
        var invoiceNo = document.querySelector(
          'input[placeholder="Invoice No."]'
        ).value;
        var date = document.querySelector('input[type="date"]').value;
        var subTotal = document.getElementById("subTotal").value;
        var gst = document.getElementById("gst").value;
        var netTotal = document.getElementById("netTotal").value;
        var received = document.getElementById("received").value;
        var balance = document.getElementById("balance").value;

        var items = [];
        var table = document
          .getElementById("myTable")
          .getElementsByTagName("tbody")[0];
        for (var i = 0; i < table.rows.length; i++) {
          var row = table.rows[i];
          var description = row.cells[1].querySelector("input").value;
          var qty = row.cells[2].querySelector("input").value;
          var weight = row.cells[3].querySelector("input").value;
          var amount = row.cells[4].querySelector("input").value;
          var lbr = row.cells[5].querySelector("input").value;
          var tot = row.cells[6].querySelector("input").value;
          items.push(
            `${description}, PCS: ${qty}, Weight: ${weight}, Amount: ${amount}, Lbr Cost: ${lbr}, Total Amount: ${tot}`
          );
        }

        var itemsText = items.join("\n");

        var message = `New Shivraj Jewellers\n\nCustomer Name: ${customerName}\nInvoice No.: ${invoiceNo}\nDate: ${date}\n\nItems:\n${itemsText}\n\nSub Total: ${subTotal}\nGST: ${gst}\nNet Total: ${netTotal}\nReceived: ${received}\nBalance: ${balance}\n\nThank you for your purchase!`;

        var whatsappNumber = prompt(
          "Enter WhatsApp Number with country code (+91 for India):"
        );
        if (whatsappNumber) {
          var url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(
            message
          )}`;
          window.open(url, "_blank");
        }
      }
    </script>
  </body>
</html>
